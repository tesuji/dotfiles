<?xml version="1.0"?>
<!DOCTYPE fontconfig SYSTEM "fonts.dtd">
<fontconfig>

  <!-- Reject broken fonts -->
  <selectfont>
    <rejectfont>
      <glob>/usr/share/fonts/truetype/Poppins-*.ttf</glob>
    </rejectfont>
  </selectfont>

  <!-- Disable fake bold for monospace -->
  <match target="font">
    <test name="spacing" compare="eq"><const>mono</const></test>
    <edit name="embolden" mode="assign"><bool>false</bool></edit>
  </match>

  <!-- Disable embedded bitmaps -->
  <match target="font"><edit mode="assign" name="embeddedbitmap"><bool>false</bool></edit></match>

  <!-- Disable autohinter for bold fonts -->
  <match target="font">
    <test name="weight" compare="more"><const>medium</const></test>
    <edit name="autohint" mode="assign"><bool>false</bool></edit>
  </match>

  <!-- Family fixes -->
  <match target="pattern">
    <test qual="any" name="family"><string>Helvetica</string></test>
    <edit mode="assign" name="family" binding="strong"><string>Helvetica Neue</string></edit>
  </match>
  <match target="pattern">
    <test qual="any" name="family"><string>ArialMT</string></test>
    <edit mode="assign" name="family" binding="strong"><string>Arial</string></edit>
  </match>
  <match target="pattern">
    <test qual="any" name="family"><string>TimesNewRomanPSMT</string></test>
    <edit mode="assign" name="family" binding="strong"><string>Times New Roman</string></edit>
  </match>

  <!-- Serif, Sans, Monospace preferences -->
  <alias>
    <family>serif</family>
    <prefer>
      <family>Noto Serif</family>
      <family>Times New Roman</family>
      <family>DejaVu Serif</family>
      <family>Free Serif</family>
      <family>Nimbus Roman No9 L</family>
      <family>SimSun</family>
      <family>MingLiU-ExtB</family>
      <family>Malgun Gothic</family>
    </prefer>
  </alias>

  <alias>
    <family>sans-serif</family>
    <prefer>
      <family>Noto Sans</family>
      <family>Segoe UI</family>
      <family>DejaVu Sans</family>
      <family>Arial</family>
      <family>Helvetica Neue</family>
      <family>Tahoma</family>
      <family>Verdana</family>
      <family>Free Sans</family>
      <family>Nimbus Sans L</family>
      <family>MS Gothic</family>
      <family>Yu Gothic UI</family>
      <family>Malgun Gothic</family>
      <family>Microsoft JhengHei</family>
      <family>Microsoft YaHei</family>
      <family>SimSun</family>
      <family>Droid Sans Fallback</family>
    </prefer>
  </alias>

  <alias>
    <family>monospace</family>
    <prefer>
      <family>Liberation Mono</family>
      <family>Consolas</family>
      <family>DejaVu Sans Mono</family>
      <family>Free Mono</family>
      <family>Nimbus Mono L</family>
      <family>Courier New</family>
      <family>MS Gothic</family>
      <family>NSimSun</family>
    </prefer>
  </alias>
</fontconfig>
